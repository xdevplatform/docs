---
title: Streaming
sidebarTitle: Streaming
---

The X API supports real-time data via endpoints like the [Filtered Stream Endpoint](https://docs.x.com/x-api/posts/filtered-stream/introduction), delivering matching Posts as they occur. This requires making a persistent http connection.

The XDK provides:
- **Async Generators**: For non-blocking consumption.
- **Rule Management**: Add/remove rules for filtered stream endpoint dynamically.
- **Reconnection Logic**: Automatic handling of disconnects (e.g., due to network issues).

## Setup and Basic Streaming
**Example: Streaming Posts Matching a Rule**
```python
import asyncio
from xdk import Client

async def stream_posts(client: Client):
    # Add a rule (e.g. Posts from xdevelopers)
    client.streams.add_rules(rules=[{"value": "from:xai", "tag": "xdevelopers_posts"}])

    # Start streaming
    async for event in client.tweets.stream_filtered():
        if event.data:  # Filter for Post events
            post = event.data
            print(f"New Post from @{post.author_id}: {post.text}")
        # Handle other event types (e.g., disconnects) via event.type

    # Cleanup on exit
    client.streams.delete_rules(tag="xai_posts")

async def main():
    client = Client(bearer_token="your_bearer_token")
    await stream_posts(client)

# Run the async loop
asyncio.run(main())
```

## Rule Management
Rules define filters on what specific data you are looking for(e.g. keywords, users etc). You can learn more about how to build rules using [this guide](https://docs.x.com/x-api/posts/filtered-stream/integrate/build-a-rule)

**Adding Rules**:
```python
rules = [
    {"value": "(python OR sdk) lang:en", "tag": "python_dev"},
    {"value": "from:xdevelopers -is:retweet", "tag": "official_updates"}
]
client.streams.add_rules(rules=rules)
```

**Listing/Deleting Rules**:
```python
available_rules = client.streams.get_rules()
print(available_rules)  # List of Rule objects

client.streams.delete_rules(ids=["12345"])  # By ID
client.streams.delete_rules(tag="python_dev")  # By tag
```

## Advanced Streaming
- **Custom Backoff**: Configure reconnection attempts:
  ```python
  client = Client(bearer_token="...", stream_backoff_max=60)  # Seconds
  ```
- **Event Filtering**: Process specific events (e.g., `tweet_create`, `user_block`).
- **Error Handling**:
  ```python
  try:
      async for event in client.tweets.stream_filtered():
          # Process
          pass
  except xdk.StreamDisconnectError as e:
      print(f"Stream disconnected: {e.code} - {e.reason}")
  ```
- **High-Volume Tips**: Use async queues (e.g., `asyncio.Queue`) for processing in separate tasks. Monitor connection health via `event.stream_lifespan`.

For full rule syntax, see [X Streaming Rules Docs](https://developer.x.com/en/docs/twitter-api/tweets/filtered-stream/integrate/build-a-rule).

## Troubleshooting
- **403 Forbidden**: Invalid auth or insufficient permissions.
- **420 Enhance Your Calm**: Rate limited; wait and retry.
- **No Data**: Check rules with `get_rules()`; ensure matching Posts exist.

For more examples and API reference, see the inline docstrings (e.g., `help(client.tweets.search_recent)`) or the generated stubs in the source. Contribute feedback via the [GitHub repo](https://github.com/xdevplatform/xdk/tree/main/xdk/python).